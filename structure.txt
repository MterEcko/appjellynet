# ESTRUCTURA COMPLETA DE ARCHIVOS - STREAMQBIT PROJECT

```
streamqbit-platform/
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .prettierrc
â”œâ”€â”€ .eslintrc.js
â”œâ”€â”€ README.md
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â”‚
â”œâ”€â”€ frontend/                          # Vue 3 Application
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”‚   â”œâ”€â”€ manifest.json              # PWA manifest
â”‚   â”‚   â”œâ”€â”€ robots.txt
â”‚   â”‚   â””â”€â”€ apple-touch-icon.png
â”‚   â”‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ assets/                    # Recursos estÃ¡ticos
â”‚   â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logo.svg
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logo-small.svg
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ default-avatar.png
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ placeholder-poster.jpg
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ hero-placeholder.jpg
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚   â”‚       â”œâ”€â”€ main.css           # Estilos globales
â”‚   â”‚   â”‚       â”œâ”€â”€ tailwind.css       # Imports de Tailwind
â”‚   â”‚   â”‚       â””â”€â”€ animations.css     # Animaciones custom
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/                # Componentes Vue reutilizables
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ common/                # Componentes comunes
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Input.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TextArea.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Select.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Checkbox.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Radio.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Toast.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Loading.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Spinner.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Dropdown.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Avatar.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Badge.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Card.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Pagination.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ EmptyState.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/                # Componentes de layout
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Navbar.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ NavbarMobile.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.vue        # Para admin panel
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Container.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PageHeader.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/                  # Componentes de autenticaciÃ³n
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ForgotPasswordForm.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResetPasswordForm.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AuthLayout.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ profile/               # Componentes de perfiles
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileSelector.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileCard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileGrid.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CreateProfileModal.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ EditProfileModal.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DeleteProfileModal.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ProfileSettings.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ content/               # Componentes de contenido
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HeroBanner.vue     # Banner destacado tipo Netflix
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContentRow.vue     # Fila horizontal de contenido
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContentCarousel.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ItemCard.vue       # Tarjeta individual de pelÃ­cula/serie
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ItemCardSkeleton.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ItemDetail.vue     # Modal con detalles del item
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ItemDetailModal.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchResults.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBar.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GenreFilter.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FilterBar.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LibraryGrid.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ player/                # Componentes del reproductor
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AdEnabledPlayer.vue    # Player principal con ads
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ JellyfinPlayer.vue     # Wrapper del player de Jellyfin
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AdOverlay.vue          # Overlay de anuncio
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AdVideoPlayer.vue      # Player especÃ­fico para ads
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PauseAdBanner.vue      # Banner en pausa
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerControls.vue     # Controles personalizados
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerProgressBar.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlayerVolumeControl.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PlayerFullscreenButton.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ account/               # Componentes de cuenta
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AccountInfo.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SubscriptionCard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PaymentMethodCard.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChangePasswordForm.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlanComparison.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UpgradeModal.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ admin/                 # Componentes de admin
â”‚   â”‚   â”‚       â”œâ”€â”€ Dashboard.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ StatsCard.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ UserTable.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AccountTable.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ CreateAccountForm.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ CreateAccountModal.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ EditAccountModal.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ SuspendAccountModal.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AdUploader.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AdManager.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AdTable.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AdPreview.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ ServerConfig.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ ServerTable.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ ServerHealthCheck.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ WebhookConfig.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ WebhookTable.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ WebhookLogViewer.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AnalyticsChart.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AnalyticsDashboard.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AuditLog.vue
â”‚   â”‚   â”‚       â””â”€â”€ AuditLogTable.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ views/                     # PÃ¡ginas completas (routes)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ public/                # PÃ¡ginas pÃºblicas
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LandingPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ForgotPasswordPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ResetPasswordPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlansPage.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ NotFoundPage.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ app/                   # PÃ¡ginas de la aplicaciÃ³n
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileSelectPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BrowsePage.vue         # PÃ¡gina principal (Netflix-like)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ WatchPage.vue          # PÃ¡gina del reproductor
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SearchPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LibraryPage.vue        # Ver biblioteca completa
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ GenrePage.vue          # Ver gÃ©nero especÃ­fico
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MyListPage.vue         # Favoritos
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ContinueWatchingPage.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ItemDetailPage.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ account/               # PÃ¡ginas de cuenta
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AccountPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ProfilesManagePage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SubscriptionPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsPage.vue
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BillingPage.vue
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SecurityPage.vue
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ admin/                 # PÃ¡ginas de administraciÃ³n
â”‚   â”‚   â”‚       â”œâ”€â”€ AdminDashboard.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ UsersManagement.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AccountsManagement.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ ProfilesManagement.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AdsManagement.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ ServersManagement.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ WebhooksManagement.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AnalyticsPage.vue
â”‚   â”‚   â”‚       â”œâ”€â”€ AuditLogPage.vue
â”‚   â”‚   â”‚       â””â”€â”€ SystemSettings.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts               # Vue Router config principal
â”‚   â”‚   â”‚   â”œâ”€â”€ routes.ts              # DefiniciÃ³n de rutas
â”‚   â”‚   â”‚   â”œâ”€â”€ guards.ts              # Route guards
â”‚   â”‚   â”‚   â””â”€â”€ middlewares.ts         # Middlewares de routing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ stores/                    # Pinia stores
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts               # Root store
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts                # Estado de autenticaciÃ³n
â”‚   â”‚   â”‚   â”œâ”€â”€ profile.ts             # Perfil actual seleccionado
â”‚   â”‚   â”‚   â”œâ”€â”€ server.ts              # Servidor Jellyfin detectado
â”‚   â”‚   â”‚   â”œâ”€â”€ content.ts             # Contenido de Jellyfin
â”‚   â”‚   â”‚   â”œâ”€â”€ player.ts              # Estado del reproductor
â”‚   â”‚   â”‚   â”œâ”€â”€ ads.ts                 # Estado de publicidad
â”‚   â”‚   â”‚   â”œâ”€â”€ account.ts             # Estado de cuenta
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.ts               # Estado admin
â”‚   â”‚   â”‚   â””â”€â”€ ui.ts                  # Estado de UI (modals, toasts, etc)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                  # Servicios de API
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts                 # Axios instance configurado
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ account.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ jellyfin.service.ts    # Proxy a Jellyfin API
â”‚   â”‚   â”‚   â”œâ”€â”€ server.service.ts      # DetecciÃ³n de servidor
â”‚   â”‚   â”‚   â”œâ”€â”€ ad.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ stats.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ admin.service.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                     # Utilidades
â”‚   â”‚   â”‚   â”œâ”€â”€ dateFormatter.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ timeFormatter.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts             # localStorage/sessionStorage wrapper
â”‚   â”‚   â”‚   â”œâ”€â”€ constants.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ config.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ adCalculator.ts        # CÃ¡lculo de posiciones de ads
â”‚   â”‚   â”‚   â”œâ”€â”€ deepLink.ts            # Generador de deep links
â”‚   â”‚   â”‚   â”œâ”€â”€ deviceDetection.ts     # DetecciÃ³n de dispositivo
â”‚   â”‚   â”‚   â”œâ”€â”€ networkUtils.ts
â”‚   â”‚   â”‚   â””â”€â”€ errorHandler.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ types/                     # TypeScript types & interfaces
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ account.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ jellyfin.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ server.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ad.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ stats.types.ts
â”‚   â”‚   â”‚   â””â”€â”€ api.types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ composables/               # Vue composables (reusable logic)
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useProfile.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useJellyfin.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useAds.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useDeepLink.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useDeviceDetection.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ usePlayer.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useToast.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useModal.ts
â”‚   â”‚   â”‚   â””â”€â”€ useLocalStorage.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ directives/                # Vue directives personalizadas
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ vClickOutside.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ vIntersect.ts
â”‚   â”‚   â”‚   â””â”€â”€ vLazyLoad.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ plugins/                   # Plugins de Vue
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ axios.ts
â”‚   â”‚   â”‚   â””â”€â”€ toast.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ App.vue                    # Componente raÃ­z
â”‚   â”‚   â””â”€â”€ main.ts                    # Entry point
â”‚   â”‚
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ tsconfig.node.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â”œâ”€â”€ postcss.config.js
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ .env.development
â”‚   â”œâ”€â”€ .env.production
â”‚   â””â”€â”€ .gitignore
â”‚
â”œâ”€â”€ backend/                           # Node.js + Express API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ config/                    # Configuraciones
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ database.ts            # Prisma config
â”‚   â”‚   â”‚   â”œâ”€â”€ env.ts                 # Variables de entorno
â”‚   â”‚   â”‚   â”œâ”€â”€ cors.ts                # CORS config
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.ts                 # JWT config
â”‚   â”‚   â”‚   â”œâ”€â”€ redis.ts               # Redis config
â”‚   â”‚   â”‚   â”œâ”€â”€ email.ts               # Email/SMTP config
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.ts             # Stripe/MercadoPago config
â”‚   â”‚   â”‚   â””â”€â”€ servers.ts             # Jellyfin servers config
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ controllers/               # Controladores de rutas
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ account.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ jellyfin.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ server.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ad.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ stats.controller.ts
â”‚   â”‚   â”‚   â””â”€â”€ admin.controller.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/                  # LÃ³gica de negocio
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ account.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ jellyfin.service.ts    # IntegraciÃ³n Jellyfin API
â”‚   â”‚   â”‚   â”œâ”€â”€ jellyfin-api.service.ts # Wrapper de API de Jellyfin
â”‚   â”‚   â”‚   â”œâ”€â”€ server-detection.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ad.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook-delivery.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ email.service.ts       # Nodemailer
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.service.ts     # Stripe/MercadoPago
â”‚   â”‚   â”‚   â”œâ”€â”€ stripe.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ mercadopago.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ suspension.service.ts  # LÃ³gica de suspensiÃ³n
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ redis.service.ts       # Cache service
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/                    # DefiniciÃ³n de rutas
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts               # Router principal
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ account.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ jellyfin.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ server.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ad.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.routes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ stats.routes.ts
â”‚   â”‚   â”‚   â””â”€â”€ admin.routes.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ middlewares/
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts     # Verificar JWT
â”‚   â”‚   â”‚   â”œâ”€â”€ admin.middleware.ts    # Verificar rol admin
â”‚   â”‚   â”‚   â”œâ”€â”€ rateLimit.middleware.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validate.middleware.ts # ValidaciÃ³n Zod
â”‚   â”‚   â”‚   â”œâ”€â”€ error.middleware.ts    # Error handler global
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.middleware.ts   # Request logging
â”‚   â”‚   â”‚   â”œâ”€â”€ cors.middleware.ts
â”‚   â”‚   â”‚   â””â”€â”€ upload.middleware.ts   # File upload (Multer)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ validators/                # Schemas de validaciÃ³n (Zod)
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ account.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ad.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook.validator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.validator.ts
â”‚   â”‚   â”‚   â””â”€â”€ admin.validator.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.util.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ bcrypt.util.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ network.util.ts        # DetecciÃ³n de red (CIDR)
â”‚   â”‚   â”‚   â”œâ”€â”€ ping.util.ts           # Latency test
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.util.ts         # Winston logger
â”‚   â”‚   â”‚   â”œâ”€â”€ email-templates.util.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ file-upload.util.ts    # Multer helper
â”‚   â”‚   â”‚   â”œâ”€â”€ response.util.ts       # Standardized API responses
â”‚   â”‚   â”‚   â”œâ”€â”€ error.util.ts          # Error classes
â”‚   â”‚   â”‚   â””â”€â”€ helpers.util.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”œâ”€â”€ express.d.ts           # Extend Express types
â”‚   â”‚   â”‚   â”œâ”€â”€ index.d.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ account.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ profile.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ jellyfin.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ webhook.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ payment.types.ts
â”‚   â”‚   â”‚   â””â”€â”€ api.types.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ jobs/                      # Cron jobs (node-cron)
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts               # Job scheduler
â”‚   â”‚   â”‚   â”œâ”€â”€ suspend-expired.job.ts # Suspender demos expirados
â”‚   â”‚   â”‚   â”œâ”€â”€ cleanup.job.ts         # Limpiar datos antiguos
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics.job.ts       # AgregaciÃ³n de analytics
â”‚   â”‚   â”‚   â””â”€â”€ health-check.job.ts    # Health check de servidores
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ templates/                 # Email templates
â”‚   â”‚   â”‚   â”œâ”€â”€ welcome.html
â”‚   â”‚   â”‚   â”œâ”€â”€ password-reset.html
â”‚   â”‚   â”‚   â”œâ”€â”€ account-suspended.html
â”‚   â”‚   â”‚   â”œâ”€â”€ account-reactivated.html
â”‚   â”‚   â”‚   â”œâ”€â”€ demo-expired.html
â”‚   â”‚   â”‚   â”œâ”€â”€ payment-failed.html
â”‚   â”‚   â”‚   â””â”€â”€ payment-success.html
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”‚   â”œâ”€â”€ schema.prisma          # Database schema
â”‚   â”‚   â”‚   â”œâ”€â”€ migrations/            # Database migrations
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ (auto-generated)
â”‚   â”‚   â”‚   â””â”€â”€ seed.ts                # Datos iniciales (seed)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ public/                    # Archivos estÃ¡ticos servidos
â”‚   â”‚   â”‚   â””â”€â”€ uploads/               # Archivos subidos temporalmente
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ app.ts                     # Express app setup
â”‚   â”‚   â””â”€â”€ server.ts                  # Entry point (HTTP server)
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                         # Tests
â”‚   â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚   â””â”€â”€ e2e/
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ .env.development
â”‚   â”œâ”€â”€ .env.production
â”‚   â”œâ”€â”€ .gitignore
â”‚   â”œâ”€â”€ jest.config.js                 # Jest config para tests
â”‚   â””â”€â”€ ecosystem.config.js            # PM2 config
â”‚
â”œâ”€â”€ nginx/                             # (OPCIONAL - NO SE USA CON CLOUDFLARE TUNNEL)
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â””â”€â”€ sites-available/
â”‚       â””â”€â”€ stream.serviciosqbit.net.conf
â”‚
â”œâ”€â”€ cloudflare/                        # ConfiguraciÃ³n de Cloudflare Tunnel
â”‚   â”œâ”€â”€ config.yml
â”‚   â””â”€â”€ credentials.json.example
â”‚
â”œâ”€â”€ docker/                            # Docker configs
â”‚   â”œâ”€â”€ Dockerfile.frontend
â”‚   â”œâ”€â”€ Dockerfile.backend
â”‚   â”œâ”€â”€ Dockerfile.dev                 # Para desarrollo
â”‚   â””â”€â”€ .dockerignore
â”‚
â”œâ”€â”€ scripts/                           # Scripts de utilidad
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â”œâ”€â”€ backup-db.sh
â”‚   â”œâ”€â”€ restore-db.sh
â”‚   â”œâ”€â”€ setup-ssl.sh
â”‚   â”œâ”€â”€ migrate-db.sh
â”‚   â”œâ”€â”€ seed-db.sh
â”‚   â””â”€â”€ health-check.sh
â”‚
â”œâ”€â”€ docs/                              # DocumentaciÃ³n
â”‚   â”œâ”€â”€ API.md                         # DocumentaciÃ³n de API (Swagger export)
â”‚   â”œâ”€â”€ SETUP.md                       # GuÃ­a de instalaciÃ³n
â”‚   â”œâ”€â”€ DEPLOYMENT.md                  # GuÃ­a de despliegue
â”‚   â”œâ”€â”€ WEBHOOKS.md                    # DocumentaciÃ³n de webhooks
â”‚   â”œâ”€â”€ DEVELOPMENT.md                 # GuÃ­a de desarrollo
â”‚   â””â”€â”€ ARCHITECTURE.md                # Arquitectura del sistema
â”‚
â”œâ”€â”€ .github/                           # GitHub Actions (opcional)
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ ci.yml
â”‚       â””â”€â”€ deploy.yml
â”‚
â””â”€â”€ docker-compose.yml                 # OrquestaciÃ³n de contenedores
```

## ğŸ“ ARCHIVOS RAÃZ IMPORTANTES

### `.gitignore`
```gitignore
# Dependencies
node_modules/
.pnp
.pnp.js

# Testing
coverage/

# Production
dist/
build/

# Environment
.env
.env.local
.env.production
.env.development

# Logs
logs/
*.log
npm-debug.log*

# OS
.DS_Store
Thumbs.db

# IDE
.vscode/
.idea/
*.swp
*.swo

# Database
*.db
*.sqlite

# Uploads
uploads/*
!uploads/.gitkeep

# Docker
docker-compose.override.yml

# Prisma
prisma/dev.db
```

### `docker-compose.yml`
```yaml
version: '3.8'

services:
  frontend:
    build:
      context: ./frontend
      dockerfile: ../docker/Dockerfile.frontend
    ports:
      - "3000:3000"
    environment:
      - VITE_API_URL=http://backend:3000
    volumes:
      - ./frontend:/app
      - /app/node_modules
    depends_on:
      - backend

  backend:
    build:
      context: ./backend
      dockerfile: ../docker/Dockerfile.backend
    ports:
      - "3001:3000"
    environment:
      - DATABASE_URL=postgresql://postgres:password@postgres:5432/streamqbit
      - REDIS_URL=redis://redis:6379
      - NODE_ENV=development
    volumes:
      - ./backend:/app
      - /app/node_modules
      - ./jellyfin-advertising:/jellyfin/advertising
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:15-alpine
    ports:
      - "5432:5432"
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=streamqbit
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  # Cloudflare Tunnel (opcional si se ejecuta como servicio)
  cloudflared:
    image: cloudflare/cloudflared:latest
    command: tunnel --config /etc/cloudflared/config.yml run
    volumes:
      - ./cloudflare:/etc/cloudflared
    depends_on:
      - backend

volumes:
  postgres_data:
  redis_data:
```

### `.env.example` (Backend)
```env
# Database
DATABASE_URL=postgresql://postgres:password@localhost:5432/streamqbit

# Redis
REDIS_URL=redis://localhost:6379

# JWT
JWT_SECRET=your-secret-key-here-change-in-production
JWT_REFRESH_SECRET=your-refresh-secret-key-here
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Server
NODE_ENV=development
PORT=3000

# CORS
CORS_ORIGIN=http://localhost:5173,https://stream.serviciosqbit.net

# Email (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=StreamQbit <noreply@serviciosqbit.net>

# Stripe
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# MercadoPago
MERCADOPAGO_ACCESS_TOKEN=APP_USR-...
MERCADOPAGO_PUBLIC_KEY=APP_USR-...

# J
